# API routes

Below are the following api routes

### Middleware

- `secureRoutes`

decodes authorization token and set header

### Verification Routes

Verification Routes for students

- `GET` `/auth`
    
    - Requires `rollno`, `password` as query returns token. token get expires in `6h`, for student token contains `rollno`.

- `POST` `/auth`

    - Requires `rollno`, `password`, `email`, `name` in request body, returns token

- `GET` `/auth/examiner`

    - Requires `username`, `password` returns token, token contains `username` and expires in `1d`

- `POST` `/auth/examiner`

    - Requires `username`, `password`, and other examiner details, returns token

### Secure Routes

#### Exam Routes

- `GET` `/exam` 
    
    - Returns all the exams that are available `exams` : [ `exam` ]

- `POST` `/exam`

    - Creates exam with fields
    - `instituteLogo` as file
    - `name`, `username`, ``

- `GET` `/exam/:examId`

    - Return details about specific exam with questions

- `PUT` `/exam/:examId`

    - Update details of the exam, if exam is not started

- `DELETE` `/exam/:examId`

    - Requires `Authorization` `Bearer $token`
    - Deletes particular exam along with reports in relation with it.

- `PUT` `/exam/:examId/question`

    - Adds question if given id is not present
    - Updates question if given id is present

- `GET` `/exam/:examId/report`

    - only `examiner` is authorized.
    - Generates report for all the participants for the exam with `examId`.

- `DELETE` `/exam/:examId/:questionId`

    - Removes the given question from the list

#### Examiner Routes
  
- `GET` `/examiner`
    - pass `username` as parameter if other user wants to access
    - Returns examiner profile without password for anybody atleast authenticated.

- `PUT` `/examiner`
    - Updates examiner document fields like `name`, `email`, `emailPassword`, `institueName`, `instituteLogo`


#### Student Routes

- `PUT` `/student`
    - Updates fields like `name`, `email`

- `GET` `/student/:rollno`
    - Returns student profile without password, `isLoggedIn`



#### Report Routes

`POST` `/report`

    - Requires `Authorization` `Bearer $token` header to create a new report
    - `examID` as parameter, `rollno` from headers

- `GET` `report/calc`      
    - Generates exam report, if its ended
    - Requires `Authorization` `Bearer $token`
    - Pass `examId` as parameter

- `GET` `/report/rollno`
    - Get all the reports by the student, student only report

- `POST` `/report/examId`
    - Get all the reports generated by the specific Id, only examiner with username can access.

- `GET` `report/examEnd`
    - Ends the exam
    - Require parameters are `examId`, `rollno`, 
    
- `PUT` `/report/question`
    - Answers the question
    - fields `questionId`, `examId`, `response`

- `DELETE` `report/question/:questionId`
    - Resets the response for that question and thereby remove it from the array of `questions`



<!-- - Some Routes for generating PDF, READ -->


